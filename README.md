# Log_Analyzer
### Log Analyzer is a Python parsing script that allow you to easily analyze log files generated by Gunicorn Server.

The script has the following features:
console application<br/>
An application that uses python 3.8 without external dependencies (Pytest is used to write tests)<br/>
The application receives the name of the file containing the correct output of the Gunicorn server<br/>

#### The script allows printing statistics for a given time period (or all):
Number of queries<br/>
Average number of queries per second<br/>
Number of individual server response codes (200: 10, 301: 20, 500: 56 etc.)<br/>
Average size of generated response (for queries with the code 2xx)<br/>

## Example usage:

1) Example call:
```
python3.8 parser.py --from 01-10-2019_11-23-11 --to 01-12-2020_01-33 logfile.log
or
python3 parser.py --from 01-10-2019_11-23-11 --to 01-12-2020_01-33 logfile.log
```
Example output:
```
from: 2019-10-01 11:23:11
to: 2020-12-01 01:33:00

requests: 96202
requests/sec: 0.0026
responses: {'200': 96205, '404': 3794}
avg size of 2xx responses: 0.0059143087158410644 Mb
```
2) Example call:
```
python3 parser.py --from 01-10-2019_11-23-11 logfile.log
```

Example output:
```
ZOSTANIE UZYTA DOMYSLNA DATA KONCOWA, --to: 2020-01-08 14:04:44 , gdyż wystąpił jeden z przypadków: 1) NIEPOPRAWNY FORMAT SŁOWA '--to' 2) BRAK SŁOWA '--to' 3) NIEPOOPRAWNY FORMAT DATY KONCOWEJ 3) DATA KONCOWA NIE ZOSTALA PODANA

from: 2019-10-01 11:23:11
to: 2020-01-08 14:04:44

requests: 96202
requests/sec: 0.0112
responses: {'200': 96205, '404': 3794}
avg size of 2xx responses: 0.0059143087158410644 Mb
```

3) Example call:
```
python3 parser.py --to 01-12-2020_01-33 logfile.log
```

Example output:
```
ZOSTANIE UZYTA DOMYSLNA DATA POCZATKOWA, --FROM: 2019-09-06 08:39:18 , gdyż wystąpił jeden z przypadków: 1) NIEPOPRAWNY FORMAT SŁOWA '--from' 2) BRAK SŁOWA '--from' 3) NIEPOOPRAWNY FORMAT DATY POCZATKOWEJ3) DATA POCZATKOWA NIE ZOSTALA PODANA

from: 2019-09-06 08:39:18
to: 2020-12-01 01:33:00

requests: 96202
requests/sec: 0.0025
responses: {'404': 3794, '200': 96205}
avg size of 2xx responses: 0.0059143087158410644 Mb
```

4) Example call:
```
python3 parser.py logfile.log
```

Example output:
```
ZOSTANIE UZYTA DOMYSLNA DATA POCZATKOWA, --FROM: 2019-09-06 08:39:18 , gdyż wystąpił jeden z przypadków: 1) NIEPOPRAWNY FORMAT SŁOWA '--from' 2) BRAK SŁOWA '--from' 3) NIEPOOPRAWNY FORMAT DATY POCZATKOWEJ3) DATA POCZATKOWA NIE ZOSTALA PODANA
ZOSTANIE UZYTA DOMYSLNA DATA KONCOWA, --to: 2020-01-08 14:04:44 , gdyż wystąpił jeden z przypadków: 1) NIEPOPRAWNY FORMAT SŁOWA '--to' 2) BRAK SŁOWA '--to' 3) NIEPOOPRAWNY FORMAT DATY KONCOWEJ 3) DATA KONCOWA NIE ZOSTALA PODANA

from: 2019-09-06 08:39:18
to: 2020-01-08 14:04:44

requests: 96202
requests/sec: 0.0090
responses: {'404': 3794, '200': 96205}
avg size of 2xx responses: 0.0059143087158410644 Mb
```
## Pytest
Example call:
```
pytest tests.py -vv
```
Example output:
```
tests.py::test_requests_in_loggs[Dec 01 11:06:07 app3-test-vm1 gunicorn[53253]: 172.16.3.14 - - [01/Dec/2019:11:06:07 +0100] "GET /internal/user/5fe5aeac-261d-4e2f-9811-c054edda14fa/agenda/2019-12-01/2019-12-02 HTTP/1.1" 200 720 "-" "python-requests/2.22.0" 92048-0-1] <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [  9%]
tests.py::test_requests_in_loggs[Dec 01 11:05:45 app3-test-vm1 gunicorn[53253]: 172.16.3.5 - - [01/Dec/2019:11:05:45 +0100] "GET /.well-known/assetlinks.json HTTP/1.0" 404 0 "-" "GoogleAssociationService" 288488-0-0] <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 18%]
tests.py::test_responses_in_loggs[Dec 01 11:06:07 app3-test-vm1 gunicorn[53253]: 172.16.3.14 - - [01/Dec/2019:11:06:07 +0100] "GET /internal/user/5fe5aeac-261d-4e2f-9811-c054edda14fa/agenda/2019-12-01/2019-12-02 HTTP/1.1" 200 720 "-" "python-requests/2.22.0" 92048-d0-result0] <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 27%]
tests.py::test_responses_in_loggs[Nov 30 23:04:03 actify3-test-vm1 gunicorn[53253]: 172.16.3.5 - - [30/Nov/2019:23:04:03 +0100] "GET /.well-known/assetlinks.json HTTP/1.0" 404 0 "-" "GoogleAssociationService" 286953-d1-result1] <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 36%]
tests.py::test_avgsize[Dec 01 11:06:07 app3-test-vm1 gunicorn[53253]: 172.16.3.14 - - [01/Dec/2019:11:06:07 +0100] "GET /internal/user/5fe5aeac-261d-4e2f-9811-c054edda14fa/agenda/2019-12-01/2019-12-02 HTTP/1.1" 200 720 "-" "python-requests/2.22.0" 92048-d0-720-1-result0] <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 45%]
tests.py::test_avgsize[Dec 01 11:06:07 app3-test-vm1 gunicorn[53253]: 172.16.3.14 - - [01/Dec/2019:11:06:07 +0100] "GET /internal/user/5fe5aeac-261d-4e2f-9811-c054edda14fa/agenda/2019-12-01/2019-12-02 HTTP/1.1" 200 720 "-" "python-requests/2.22.0" 92048-d1-1440-2-result1] <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 54%]
tests.py::test_date_diff_in_Seconds <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 63%]
tests.py::test_req_on_sec <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 72%]
tests.py::test_default_start <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 81%]
tests.py::test_default_end <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [ 90%]
tests.py::test_start_end <- ../../2020_01_29a_log_file/logfile/untitled65/tests.py PASSED [100%]
```

